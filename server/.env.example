# AudiFi Backend Environment Configuration
# Copy this file to .env and fill in the values
#
# For Fly.io deployments, set secrets via: flyctl secrets set KEY=value
# DATABASE_URL should point to your Neon PostgreSQL database.

# =============================================================================
# SERVER
# =============================================================================
NODE_ENV=development
# PORT: Use 3001 for local development (Fly.io sets PORT=8080 automatically)
PORT=3001
API_BASE_URL=http://localhost:3001

# =============================================================================
# DATABASE (Neon PostgreSQL)
# =============================================================================
# Get your connection string from the Neon dashboard:
# https://console.neon.tech/
#
# Format: postgresql://user:password@host.neon.tech:5432/database
# Note: sslmode=require is automatically added for Neon connections
DATABASE_URL=postgresql://user:password@host.neon.tech:5432/database

# =============================================================================
# AUTHENTICATION
# =============================================================================
# JWT Configuration (min 32 characters in production)
JWT_SECRET=your-jwt-secret-key-change-in-production
JWT_EXPIRES_IN=7d

# Magic Link Configuration (e.g., Magic.link or custom email service)
MAGIC_LINK_SECRET=your-magic-link-secret
MAGIC_LINK_EXPIRY_MINUTES=15

# Email Provider (for magic links)
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=your-sendgrid-api-key
EMAIL_FROM=noreply@audifi.io

# OAuth Providers (optional SSO)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret

# =============================================================================
# BLOCKCHAIN / WEB3
# =============================================================================
# Ethereum RPC URLs
ETH_MAINNET_RPC_URL=https://mainnet.infura.io/v3/your-project-id
ETH_GOERLI_RPC_URL=https://goerli.infura.io/v3/your-project-id
ETH_SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/your-project-id

# Polygon RPC URLs (for lower gas costs)
POLYGON_MAINNET_RPC_URL=https://polygon-mainnet.infura.io/v3/your-project-id
POLYGON_MUMBAI_RPC_URL=https://polygon-mumbai.infura.io/v3/your-project-id

# Base RPC URLs (L2 option)
BASE_MAINNET_RPC_URL=https://base-mainnet.infura.io/v3/your-project-id
BASE_GOERLI_RPC_URL=https://base-goerli.infura.io/v3/your-project-id

# Contract Deployment Private Key (NEVER commit the actual key!)
DEPLOYER_PRIVATE_KEY=your-deployer-private-key

# =============================================================================
# IPFS / STORAGE
# =============================================================================
IPFS_GATEWAY_URL=https://gateway.pinata.cloud/ipfs
PINATA_API_KEY=your-pinata-api-key
PINATA_SECRET_KEY=your-pinata-secret-key

# =============================================================================
# PAYMENTS
# =============================================================================
# Stripe
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_PRICE_ID_PRO=price_your-pro-plan-price-id

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================
# Analytics/Events (optional)
SEGMENT_WRITE_KEY=your-segment-write-key

# Streaming/Chat Integration (for V Studio)
STREAM_API_KEY=your-stream-api-key
STREAM_API_SECRET=your-stream-api-secret

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# CORS
# =============================================================================
# Add your frontend URLs here
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,https://audifi.io,https://audifi-api.fly.dev

# =============================================================================
# API URL (Production)
# =============================================================================
API_URL=https://api.audifi.io
